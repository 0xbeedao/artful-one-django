{% extends "site_detail_page.html" %}

{% block extrahead %}
<meta name="twitter:card" content="summary">{% if item.card_image %}
<meta name="twitter:image"
  content="{% if item.card_image %}{{ item.card_image }}{% else %}https://artful.one/card{{ request.path }}{% endif %}">
{% else %}
<meta name="twitter:card" content="summary">{% endif %}
<meta name="twitter:creator" content="@bkroeze">
<meta property="og:url" content="https://artful.one{{ request.path }}">
<meta property="og:title" content="{% block card_title %}{% endblock %}">{% if item.card_image %}
<meta property="og:image"
  content="{% if item.card_image %}{{ item.card_image }}{% else %}https://artful.one/card{{ request.path }}{% endif %}">
{% endif %}
<meta property="og:type" content="article">
<meta property="og:description" content="{% block card_description %}{% endblock %}">
<meta property="og:updated_time" content="{{ item.created_unixtimestamp }}">
{% if item.is_draft %}
<meta name="robots" content="noindex">
{% endif %}
{% endblock %}

{% block primary %}
<div class="entry entryPage">
  {% if show_comment_warning %}
  <div class="ui warning message">
    <p>Your comment is being held in a moderation queue. (<a href="{{ item.get_absolute_url }}">clear</a>)</p>
  </div>
  {% endif %}
  {% block item_content %}
  {% endblock %}
</div>
{% if recent_articles %}
<div class="recent-articles">
  <div class="ui divider"></div>
  <h2 class="ui header">{% block recent_articles_header %}Recent articles{% endblock %}</h2>
  <div class="ui bulleted list">
    {% for article in recent_articles %}{% if article != item %}
    <div class="item"><a href="{{ article.get_absolute_url }}">{{ article }}</a> - {{ article.created|date:"jS F Y" }}</div>
    {% endif %}{% endfor %}
  </div>
</div>
{% endif %}
{% endblock %}

{% block thirdsection %}

{% if comments %}
<h2 class="ui dividing header">{{ comments|length }} comment{{ comments|length|pluralize }}</h2>

<div id="comment-wrapper">

  <div id="addcomment">
    {% if comments_open %}
    <form class="ui form" action="/addcomment/" method="post">
      <div class="field">
        <label for="yourname">Name:</label>
        <input type="text" id="yourname" name="name" value="{{ name }}">
      </div>
      {% if not openid %}
      <div class="field">
        <label for="yoururl">URL:</label>
        <input type="text" id="yoururl" name="url">
      </div>
      <div class="ui message">
        <img alt="" src="/static/css/img/openid-14x14.png" style="vertical-align: top; padding-top: 3px"> <a
          href="/openid/">Sign in with OpenID</a>
      </div>
      {% else %}
      <div class="ui message">
        <strong><img alt="" src="/static/css/img/openid-14x14.png"
            style="vertical-align: top; padding-top: 3px"> {{ openid }}</strong>
      </div>
      {% endif %}
      <div class="field">
        <textarea rows="10" name="body"></textarea>
      </div>
      <div class="grouped fields">
        <div class="field">
          <div class="ui radio checkbox">
            <input type="radio" name="html_mode" value="simple" id="html_simple" checked="checked">
            <label for="html_simple">Auto-HTML</label>
          </div>
        </div>
        <div class="field">
          <div class="ui radio checkbox">
            <input type="radio" name="html_mode" value="advanced" id="html_advanced">
            <label for="html_advanced">Manual XHTML</label>
          </div>
        </div>
      </div>
      <div class="ui info message" id="help_html_simple">
        <strong class="helpcontext">Auto-HTML:</strong> Line breaks are preserved; URLs will be converted in to links.
      </div>
      <div class="ui info message" id="help_html_advanced">
        <strong class="helpcontext">Manual XHTML:</strong> Enter your own, valid <acronym title="eXtensible HyperText Markup
    Language">XHTML</acronym>. Allowed tags are
        <samp>a</samp>, <samp>p</samp>, <samp>blockquote</samp>, <samp>ul</samp>,
        <samp>ol</samp>, <samp>li</samp>, <samp>dl</samp>, <samp>dt</samp>,
        <samp>dd</samp>, <samp>em</samp>, <samp>strong</samp>, <samp>dfn</samp>,
        <samp>code</samp>, <samp>q</samp>, <samp>samp</samp>, <samp>kbd</samp>,
        <samp>var</samp>, <samp>cite</samp>, <samp>abbr</samp>, <samp>acronym</samp>,
        <samp>sub</samp>, <samp>sup</samp>, <samp>br</samp>, <samp>pre</samp>
      </div>
      <button class="ui button" type="submit">Preview comment</button>
      <input type="hidden" name="content_type" value="{{ content_type }}">
      <input type="hidden" name="object_id" value="{{ object_id }}">
    </form>
    {% else %}
    <div class="ui message"><em>Comments are closed.</em></div>
    {% endif %}
  </div><!-- #addcomment -->

</div><!-- #comment-wrapper -->
{% endif %}
{% endblock %}